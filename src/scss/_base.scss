// =============================================================================
// Base do Design System EasyJur
// Fonte da verdade para variáveis, Bootstrap e customizações globais.
// =============================================================================

// Definições de Cores Principais
$primary: #e5293f;
$secondary: #6B7280; // Alterado para cinza para manter apenas tons de vermelho, cinza e branco

// Definição de Cores Customizadas (para serem adicionadas ao mapa do Bootstrap)
$custom-colors: (
  "red-500": #E5293F,
  "red-400": #F31D3F,
  "red-600": #C51935,
  "red-200": #F2949F,
  "red-100": #FCD9DE,
  "blue-500": #2784B1,
  "blue-400": #3B82F6,
  "blue-600": #06B6D4,
  "blue-200": #92CCE1,
  "blue-100": #DAEAF2,
  "green-500": #047857,
  "green-400": #0CB56F,
  "green-200": #85DAB7,
  "orange-500": #F97316,
  "orange-400": #FF8C00,
  "orange-200": #FBBF24,
  "purple-500": #8B5CF6,
  "purple-400": #A78BFA,
  "dark-red-500": #800000,
  "dark-red-400": #B91C1C,
  "pink-500": #FF385C,
  "pink-400": #FE5675,
  "gray-900": #212529,
  "gray-800": #585B5E,
  "gray-700": #606469,
  "gray-600": #4B5563,
  "gray-500": #6B7280,
  "gray-400": #7A8188,
  "gray-350": #909294,
  "gray-300": #7F919A,
  "gray-200": #9CA3AF,
  "gray-150": #E7E8E9,
  "gray-100": #F8F9FA,
  "white": #FFFFFF
);

// Definições de Fontes
@font-face {
  font-family: 'Borna';
  src: url('../fonts/borna-regular-webfont.woff2') format('woff2'),
    url('../fonts/borna-regular-webfont.woff') format('woff');
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: 'Borna';
  src: url('../fonts/borna-regularitalic-webfont.woff2') format('woff2'),
    url('../fonts/borna-regularitalic-webfont.woff') format('woff');
  font-weight: 400;
  font-style: italic;
}

@font-face {
  font-family: 'Borna';
  src: url('../fonts/borna-medium-webfont.woff2') format('woff2'),
    url('../fonts/borna-medium-webfont.woff') format('woff');
  font-weight: 500;
  font-style: normal;
}

@font-face {
  font-family: 'Borna';
  src: url('../fonts/borna-mediumitalic-webfont.woff2') format('woff2'),
    url('../fonts/borna-mediumitalic-webfont.woff') format('woff');
  font-weight: 500;
  font-style: italic;
}

@font-face {
  font-family: 'Borna';
  src: url('../fonts/borna-semibold-webfont.woff2') format('woff2'),
    url('../fonts/borna-semibold-webfont.woff') format('woff');
  font-weight: 600;
  font-style: normal;
}

@font-face {
  font-family: 'Borna';
  src: url('../fonts/borna-semibolditalic-webfont.woff2') format('woff2'),
    url('../fonts/borna-semibolditalic-webfont.woff') format('woff');
  font-weight: 600;
  font-style: italic;
}

@font-face {
  font-family: 'Borna';
  src: url('../fonts/borna-bold-webfont.woff2') format('woff2'),
    url('../fonts/borna-bold-webfont.woff') format('woff');
  font-weight: 700;
  font-style: normal;
}

@font-face {
  font-family: 'Borna';
  src: url('../fonts/borna-bolditalic-webfont.woff2') format('woff2'),
    url('../fonts/borna-bolditalic-webfont.woff') format('woff');
  font-weight: 700;
  font-style: italic;
}

// Configuração de Tipografia do Bootstrap
$font-family-sans-serif: "Borna", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

// Importar funções e variáveis do Bootstrap para poder sobrescrever/estender
@import "bootstrap/scss/functions";

// Overrides de Variáveis do Bootstrap (Devem vir ANTES do import de variables)
// Remover glow/sombra vermelha de foco nos formulários
$input-focus-box-shadow: none;
$form-select-focus-box-shadow: none;
$form-check-input-focus-box-shadow: none;
$btn-focus-box-shadow: none;

// Alterar borda de foco para cinza neutro
$input-focus-border-color: #6B7280; // Gray 500
$form-select-focus-border-color: #6B7280;

@import "bootstrap/scss/variables";
@import "bootstrap/scss/variables-dark";

// Merge de cores customizadas no mapa de temas
$theme-colors: map-merge($theme-colors, $custom-colors);

// Importar o restante do Bootstrap
@import "bootstrap/scss/maps";
@import "bootstrap/scss/mixins";
@import "bootstrap/scss/utilities";
@import "bootstrap/scss/root";
@import "bootstrap/scss/reboot";
@import "bootstrap/scss/type";
@import "bootstrap/scss/images";
@import "bootstrap/scss/containers";
@import "bootstrap/scss/grid";
@import "bootstrap/scss/tables";
@import "bootstrap/scss/forms";
@import "bootstrap/scss/buttons";
@import "bootstrap/scss/transitions";
@import "bootstrap/scss/dropdown";
@import "bootstrap/scss/button-group";
@import "bootstrap/scss/nav";
@import "bootstrap/scss/navbar";
@import "bootstrap/scss/card";
@import "bootstrap/scss/accordion";
@import "bootstrap/scss/breadcrumb";
@import "bootstrap/scss/pagination";
@import "bootstrap/scss/badge";
@import "bootstrap/scss/alert";
@import "bootstrap/scss/progress";
@import "bootstrap/scss/list-group";
@import "bootstrap/scss/close";
@import "bootstrap/scss/toasts";
@import "bootstrap/scss/modal";
@import "bootstrap/scss/tooltip";
@import "bootstrap/scss/popover";
@import "bootstrap/scss/carousel";
@import "bootstrap/scss/spinners";
@import "bootstrap/scss/offcanvas";
@import "bootstrap/scss/placeholders";
@import "bootstrap/scss/helpers";
@import "bootstrap/scss/utilities/api";

// Botões sólidos com fonte branca (primário, secundário, terciário)
.btn-primary,
.btn-secondary,
.btn-tertiary {
  --#{$prefix}btn-color: #fff;
  --#{$prefix}btn-hover-color: #fff;
  --#{$prefix}btn-active-color: #fff;
  --#{$prefix}btn-disabled-color: #fff;
}

// Remover o box-shadow vermelho ao focar ou passar o mouse no checkbox
.form-check-input:focus {
  border-color: #dee2e6; // Cor padrão da borda
  outline: 0;
  box-shadow: none;
}

.form-check-input:checked {
  background-color: $primary;
  border-color: $primary;
}

// Estilização específica da Sidebar (Documentação)
.sidebar {
  .nav-link {
    font-size: 0.875rem; // Equivalente a 14px
  }
}

// =============================================================================
// Componente de Calendário (Range Picker)
// =============================================================================

// (Código do calendário - assumindo que já existe ou logo será adicionado, mas aqui estou apenas anexando o Multiselect)

// =============================================================================
// Componente Multiselect (Dropdown Customizado)
// =============================================================================

.dropdown-multiselect {
  font-family: 'Borna', sans-serif !important; // Força a fonte
  font-size: 0.875rem !important; // Tamanho 14px solicitado
  display: inline-block;
  vertical-align: middle;
  width: 300px !important; // Largura fixa sugerida (pode ser ajustada)
  max-width: 300px !important;
  height: 42px !important; // Altura fixa no wrapper também 
  max-height: 42px !important;
  overflow: visible; // Permite que o menu dropdown saia do wrapper

  // Garante herança para elementos de formulário que resetam fonte
  .btn,
  .dropdown-toggle,
  .dropdown-menu,
  .dropdown-item,
  span,
  .action-clear {
    font-family: 'Borna', sans-serif !important;
  }

  // Estilização específica do botão Limpar filtros
  .action-clear {
    color: $gray-500; // Cinza padrão (neutro)
    font-weight: 400;
    font-size: 0.875rem;
    padding: 0.4rem 1rem; // Altura reduzida
    display: flex;
    align-items: center;
    justify-content: center; // Centraliza horizontalmente
    width: 100%; // Garante largura total para centralizar
    gap: 0.5rem;
    transition: color 0.2s;
    cursor: pointer;

    &:hover {
      background-color: transparent;
      color: $primary; // Vermelho apenas no hover
    }

    // Ícone herda a cor do pai
    i,
    svg {
      color: inherit;
    }
  }

  .dropdown-toggle {
    display: flex;
    justify-content: space-between; // Texto esquerda, seta direita
    align-items: center;
    width: 100% !important; // Ocupa exatamente a largura do pai (300px)
    max-width: 100% !important;
    height: 42px !important; // Altura absoluta
    min-height: 42px !important;
    max-height: 42px !important;
    line-height: 1 !important;
    overflow: hidden !important; // Força o corte de qualquer conteúdo que saia
    box-sizing: border-box !important;
    gap: 0.5rem;
    background-color: $white;
    border: 1px solid $border-color;
    color: $body-color;
    padding: 0 15px !important; // Travado em 0 vertical
    border-radius: $border-radius;
    transition: all 0.2s;
    margin: 0 !important;

    // Seta padrão do Bootstrap (caret) oculta
    &::after {
      display: none !important;
    }

    margin-left: auto; // Empurra a seta para a direita extrema se justify falhar

    &:hover,
    &:focus,
    &.show {
      background-color: $gray-100;
      border-color: $border-color;
      color: $body-color;
      box-shadow: none;
    }

    // Contador customizado (+N)
    .badge-custom {
      background-color: #E7E8E9 !important; // Cinza claro solicitado
      color: #212529 !important; // Cinza escuro solicitado
      font-weight: 500;
      font-size: 0.75rem;
      flex-shrink: 0; // Impede que o contador seja espremido
      white-space: nowrap;
    }

    // Área de badges dentro do botão
    .selected-badges {
      display: flex;
      flex-wrap: nowrap; // Impede que os badges pulem para a próxima linha
      overflow: hidden; // Corta badges que excederem o espaço
      gap: 0.25rem;
      align-items: center;
      flex-grow: 1; // Ocupa espaço disponível para empurrar o contador
    }

    .badge {
      font-weight: 500;
      font-size: 0.75rem;
      padding: 0.35em 0.65em;
      max-width: 110px; // Largura máxima para cada badge
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis; // O "abreviado" solicitado
      display: inline-flex;
      align-items: center;

      // Badge de contador extra (+2)
      &.badge-counter {
        background-color: $gray-100;
        color: $body-color;
        border: 1px solid $border-color;
        max-width: none; // Contador não abrevia
      }
    }
  }


  .dropdown-menu {
    border-radius: 0.5rem;
    box-shadow: $box-shadow;
    border: 1px solid $border-color;
    padding: 0.5rem 0;
    margin-top: 0.25rem;
    width: 100%;
    min-width: auto;

    // Forçar abertura para baixo
    top: 100% !important;
    bottom: auto !important;
    transform: none !important;

    .dropdown-header {
      padding: 0.5rem 1rem;
      color: $gray-600;
      font-weight: 600;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
  }

  .dropdown-item {
    padding: 0.35rem 0.5rem; // Reduzido para aproximar da borda
    display: flex;
    align-items: center;
    gap: 0.35rem; // Reduzido entre ícone e texto
    color: $body-color;
    font-weight: 400;
    cursor: pointer;
    background-color: transparent;
    transition: background-color 0.15s ease-in-out;
    overflow: hidden; // Necessário para o truncamento interno

    // Ícone de check (CSS Puro para garantir visualização)
    .check-icon {
      width: 20px; // Reduzido de 24px
      height: 20px;
      min-width: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none !important;
      border: 0 !important;
      margin-right: 0;
      flex-shrink: 0; // Garante que o ícone não suma com texto longo

      // Oculta o SVG problemático
      svg {
        display: none !important;
      }

      // Desenha o check com CSS
      &::after {
        content: '';
        display: block;
        width: 6px; // Largura da haste menor
        height: 12px; // Altura da haste maior
        border: solid transparent; // Invisível por padrão
        border-width: 0 2px 2px 0; // Borda direita e inferior => L shape
        transform: rotate(45deg);
        margin-top: -2px;
        opacity: 0;
        transition: all 0.1s ease;
      }
    }

    // Texto do item com truncamento
    .item-text {
      flex-grow: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: block;
    }

    &:hover {
      background-color: $gray-100;
      color: $body-color;
    }

    // Evita o estilo padrão azul do .active do Bootstrap
    &:active,
    &.active {
      background-color: $gray-100;
      color: $body-color;
    }

    // Estado Selecionado 
    &.selected {
      font-weight: 500;
      background-color: transparent;

      .check-icon {
        background: none !important;
        border: 0 !important;

        // Torna o check visível e vermelho
        &::after {
          border-color: $primary !important; // Vermelho
          border-width: 0 2px 2px 0;
          opacity: 1;
        }
      }

      &:hover {
        background-color: $gray-100;
      }
    }
  }
}


// =============================================================================
// PADRONIZAÇÃO GLOBAL DE INPUTS
// =============================================================================

.form-control,
.form-select {
  padding: 10px 15px; // Solicitado: 10px por 15px
  min-height: 42px; // Altura mínima ajustada
  font-size: 0.875rem; // 14px
}

// Ajustes proporcionais para variações de tamanho
.form-control-sm,
.form-select-sm {
  min-height: 32px;
  padding: 4px 10px;
}

.form-control-lg,
.form-select-lg {
  min-height: 52px;
  padding: 14px 20px;
}